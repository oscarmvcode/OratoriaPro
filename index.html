<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OratoriaPro | Analizador Independiente</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
:root{
  --fondo:#0f172a; --tarjeta:#1e293b; --primario:#a855f7; --exito:#22c55e;
  --alerta:#f59e0b; --error:#ef4444; --texto:#f1f5f9;
}
body{background:var(--fondo);color:var(--texto);font-family:'Inter',sans-serif;padding:20px;}
.app-card{max-width:1200px;margin:auto;background:var(--tarjeta);border-radius:25px;padding:35px;border:1px solid rgba(255,255,255,0.1);box-shadow:0 25px 60px rgba(0,0,0,0.5);}
.header-stats{display:flex;justify-content:space-around;margin-bottom:25px;gap:15px;}
.score-circle{width:140px;height:140px;border-radius:50%;border:10px solid #334155;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:42px;font-weight:900;transition:all 0.2s ease;}
.score-label{font-size:0.65rem;text-transform:uppercase;opacity:0.7;}
.stat-badge{background:rgba(255,255,255,0.05);padding:12px;border-radius:15px;text-align:center;border:1px solid rgba(255,255,255,0.1);flex:1;}
.stat-num{display:block;font-size:1.5rem;font-weight:800;color:var(--primario);}
.stat-desc{font-size:0.65rem;text-transform:uppercase;color:#94a3b8;}
.advice-panel{background:rgba(56,189,248,0.1);border:1px solid rgba(56,189,248,0.2);border-radius:15px;padding:15px;margin-bottom:20px;font-size:0.9rem;}
textarea{width:100%;height:350px;background:rgba(0,0,0,0.2);border:2px solid rgba(255,255,255,0.1);border-radius:20px;padding:20px;color:#fff;font-size:1.1rem;line-height:1.6;outline:none;transition:0.2s;resize:none;}
textarea:focus{border-color:var(--primario);background:rgba(0,0,0,0.3);}
.mode-btn, .analysis-level-btn{flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.03);color:#94a3b8;font-weight:700;cursor:pointer;transition:0.2s;}
.mode-btn.active{background:var(--primario);color:white;border-color:var(--primario);}
.analysis-level-btn.active{background:var(--alerta);color:white;border-color:var(--alerta);}
.pilar-title{font-size:0.75rem;font-weight:800;text-transform:uppercase;color:var(--primario);letter-spacing:1.5px;margin:25px 0 12px;display:flex;align-items:center;gap:10px;}
.pilar-title::after{content:"";height:1px;flex:1;background:rgba(168,85,247,0.2);}
.alert-box{padding:12px;border-radius:10px;margin-bottom:8px;border-left:5px solid #475569;background:rgba(255,255,255,0.03);display:flex;align-items:center;gap:12px;font-size:0.85rem;}
.alert-box.fail{border-left-color:var(--error);background:rgba(239,68,68,0.08);color:#fca5a5;}
.alert-box.pass{border-left-color:var(--exito);background:rgba(34,197,94,0.08);color:#86efac;}
.pilar-bar{height:15px;border-radius:10px;background:rgba(255,255,255,0.1);margin-bottom:15px;overflow:hidden;}
.pilar-fill{height:100%;border-radius:10px;width:0%;transition:width 0.5s;}
.pilar-label{font-size:0.75rem;margin-bottom:5px;}
</style>
</head>
<body>
<div class="app-card">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold m-0">üéôÔ∏è Oratoria<span style="color:var(--primario)">Pro</span></h3>
    <button class="btn btn-sm btn-outline-danger px-3" onclick="resetApp()">REINICIAR</button>
  </div>

  <div class="advice-panel" id="advicePanel">üí° Analiza tu discurso seg√∫n modo y nivel.</div>

  <div class="header-stats">
    <div class="stat-badge"><span id="statWords" class="stat-num">0</span><span class="stat-desc">Palabras</span></div>
    <div id="scoreRing" class="score-circle">100<span class="score-label">Impacto</span></div>
    <div class="stat-badge"><span id="statTime" class="stat-num">0:00</span><span class="stat-desc">Minutos</span></div>
  </div>

  <div class="d-flex gap-2 mb-2">
    <button id="btn-acad" class="mode-btn active" onclick="setMode('acad')">ACAD√âMICO</button>
    <button id="btn-corp" class="mode-btn" onclick="setMode('corp')">CORPORATIVO</button>
    <button id="btn-polit" class="mode-btn" onclick="setMode('polit')">POL√çTICO</button>
    <button id="btn-sales" class="mode-btn" onclick="setMode('sales')">VENTAS</button>
  </div>

  <div class="d-flex gap-2 mb-4">
    <button id="lvl-suave" class="analysis-level-btn active" onclick="setLevel('suave')">SUAVE</button>
    <button id="lvl-estricto" class="analysis-level-btn" onclick="setLevel('estricto')">ESTRUCTO</button>
  </div>

  <textarea id="box" placeholder="Pega tu discurso aqu√≠..." oninput="analyze()"></textarea>

  <div id="results-container">
    <div class="pilar-title">1. Persuasi√≥n (Ethos & Pathos)</div>
    <div id="pilar-tono"></div>
    <div class="pilar-bar"><div id="bar-tono" class="pilar-fill"></div></div>

    <div class="pilar-title">2. Fluidez (Sin Muletillas)</div>
    <div id="pilar-mule"></div>
    <div class="pilar-bar"><div id="bar-mule" class="pilar-fill"></div></div>

    <div class="pilar-title">3. Autoridad (Verbos de Acci√≥n)</div>
    <div id="pilar-verbos"></div>
    <div class="pilar-bar"><div id="bar-verbos" class="pilar-fill"></div></div>

    <div class="pilar-title">4. Ritmo y Estructura</div>
    <div id="pilar-ritmo"></div>
    <div class="pilar-bar"><div id="bar-ritmo" class="pilar-fill"></div></div>

    <div class="pilar-title">5. Conexi√≥n Emocional</div>
    <div id="pilar-emocion"></div>
    <div class="pilar-bar"><div id="bar-emocion" class="pilar-fill"></div></div>
  </div>
</div>

<script>
let currentMode='acad';
let analysisLevel='suave';
const LEVEL_FACTOR={suave:0.7,estricto:1.0};
const MAX_ERRORS_DISPLAY=5;

const RULES={
acad:{ethos:["investigaci√≥n","datos","estudios","referencias","citado","metodolog√≠a","profesor","acad√©mico"],
      pathos:["inter√©s","curiosidad","ejemplo","reflexiona","analiza","descubre"],
      deboleza:["supongo","tal vez","quiz√°s","creo que","magia","suerte"],
      mule:["eh","eee","mmm","este","digamos","o sea","tipo"],
      poder:["explicamos","demostramos","analizamos","comprobamos","argumentamos","justificamos"]},
corp:{ethos:["experiencia","resultado","confianza","profesional","garant√≠a","certificado","proyecto"],
      pathos:["equipo","impacto","eficiencia","beneficio","oportunidad","satisfacci√≥n"],
      deboleza:["no estoy seguro","corazonada","tal vez","supongo"],
      mule:["obviamente","digamos","este","eh","mmm","en fin","claro"],
      poder:["lideramos","ejecutamos","resolvemos","impulsamos","creamos","decidimos"]},
polit:{ethos:["compromiso","ley","pa√≠s","congreso","pol√≠tica","ciudadanos","hist√≥rico"],
       pathos:["justicia","unidad","esperanza","futuro","patria","familia","derechos"],
       deboleza:["quiz√°s","tal vez","ojal√°","creo que","supongo"],
       mule:["eh","mmm","este","o sea","digamos","como dije"],
       poder:["garantizamos","defendemos","apoyamos","promovemos","cumplimos","luchamos"]},
sales:{ethos:["cliente","beneficio","garant√≠a","confianza","experiencia","resultado","oferta"],
       pathos:["emocion","entusiasmo","urgencia","oportunidad","transformaci√≥n","pasi√≥n","sue√±o"],
       deboleza:["tal vez","supongo","quiz√°s","no s√©","creo que","magia"],
       mule:["eh","mmm","este","digamos","o sea","obviamente","tipo"],
       poder:["transformamos","decidimos","impulsamos","creamos","actuamos","lideramos","ejecutamos"]}
};

function setMode(m){
  currentMode=m;
  document.querySelectorAll('.mode-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('btn-'+m).classList.add('active');
  const adviceTexts={acad:"Prioriza datos y evidencia.",corp:"Muestra resultados y confianza.",polit:"Conecta con ciudadan√≠a y autoridad.",sales:"Usa urgencia y emoci√≥n."};
  document.getElementById('advicePanel').innerHTML=`üí° ${adviceTexts[m]}`;
  analyze();
}

function setLevel(lvl){
  analysisLevel=lvl;
  document.querySelectorAll('.analysis-level-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('lvl-'+lvl).classList.add('active');
  analyze();
}

function resetApp(){document.getElementById('box').value=''; analyze();}

function analyze(){
  const pillarIds=['pilar-tono','pilar-mule','pilar-verbos','pilar-ritmo','pilar-emocion'];
  pillarIds.forEach(id=>document.getElementById(id).innerHTML='');

  const raw=document.getElementById('box').value;
  const text=raw.toLowerCase();
  const words=raw.trim().split(/\s+/).filter(w=>w.length>0);
  let score=100;
  if(words.length===0){updateUI(100,0,"0:00"); updateBars([100,100,100,100,100]); return;}

  const rules=RULES[currentMode];
  const factor=LEVEL_FACTOR[analysisLevel];

  const pilarData=[
    {id:'pilar-tono',errs:[],checks:[...rules.deboleza],msg:"Equilibrio ret√≥rico √≥ptimo."},
    {id:'pilar-mule',errs:[],checks:[...rules.mule],msg:"Fluidez impecable."},
    {id:'pilar-verbos',errs:[],checks:[...rules.poder],msg:"Voz de mando activa."},
    {id:'pilar-ritmo',errs:[],checks:[],msg:"Cadencia profesional."},
    {id:'pilar-emocion',errs:[],checks:[...rules.pathos],msg:"Conexi√≥n lograda."}
  ];

  // Persuasi√≥n y debilidad
  rules.deboleza.forEach(d=>{
    if(text.includes(d)){
      pilarData[0].errs.push(`FUGA DE AUTORIDAD: "${d}" debilita tu discurso.`);
      score -= 15*factor;
    }
  });
  const hasEthos=rules.ethos.some(p=>text.includes(p));
  const hasPathos=rules.pathos.some(p=>text.includes(p));
  if(words.length>10){
    if(!hasEthos){
      pilarData[0].errs.push("Falta Ethos.");
      score -= 10*factor;
    }
    if(!hasPathos){
      pilarData[0].errs.push("Falta Pathos.");
      score -= 10*factor;
    }
  }
  if(analysisLevel==='estricto'){
    rules.pathos.forEach(p=>{
      if(!text.includes(p)) pilarData[4].errs.push(`Considera usar "${p}" para Pathos.`);
    });
  }

  // Fluidez
  rules.mule.forEach(m=>{
    if(new RegExp("\\b"+m+"\\b","gi").test(text)){
      pilarData[1].errs.push(`Elimina "${m}" para mejorar fluidez.`);
      score -= 8*factor;
    }
  });

  // Verbos de acci√≥n
  const hasPoder=rules.poder.some(v=>text.includes(v));
  if(!hasPoder && words.length>20){
    pilarData[2].errs.push("Faltan verbos de acci√≥n.");
    score -= 12*factor;
  }
  if(analysisLevel==='estricto'){
    rules.poder.forEach(v=>{
      if(!text.includes(v)) pilarData[2].errs.push(`Considera usar el verbo "${v}".`);
    });
  }

  // Ritmo
  const frases=raw.split(/[.!?]+/).filter(f=>f.trim().length>5);
  const limite=currentMode==='sales'?12:18;
  frases.forEach(f=>{
    if(f.trim().split(/\s+/).length>limite){
      pilarData[3].errs.push("Frase muy larga.");
      score -= 10*factor;
    }
  });

  // Conexi√≥n emocional
  if(!hasPathos && words.length>20){
    pilarData[4].errs.push("Falta conexi√≥n emocional.");
    score -= 10*factor;
  }

  // Render
  pilarData.forEach(p=>render(p.id,p.errs,p.msg));
  const sec=Math.floor((words.length/130)*60);
  updateUI(Math.max(0,score),words.length,`${Math.floor(sec/60)}:${(sec%60).toString().padStart(2,'0')}`);
  updateBars(pilarData.map(p=>calcBar(p.errs,words.length)));
}

function render(id,errs,okMsg){
  const el=document.getElementById(id);
  if(errs.length>0){
    errs.slice(0,MAX_ERRORS_DISPLAY).forEach(e=>{
      const d=document.createElement('div');
      d.className="alert-box fail";
      d.innerHTML=`<span>‚ö°</span><div>${e}</div>`;
      el.appendChild(d);
    });
  } else {
    const d=document.createElement('div');
    d.className="alert-box pass";
    d.innerHTML=`<span>‚úî</span><div>${okMsg}</div>`;
    el.appendChild(d);
  }
}

function updateUI(score,wCount,timeStr){
  document.getElementById('statWords').innerText=wCount;
  document.getElementById('statTime').innerText=timeStr;
  const ring=document.getElementById('scoreRing');
  ring.innerHTML=`${Math.round(score)}<span class="score-label">Impacto</span>`;
  let color=score>80?'var(--exito)':(score>50?'var(--alerta)':'var(--error)');
  ring.style.borderColor=color; ring.style.color=color;
}

function calcBar(errs,words){
  if(words===0) return 100;
  const ratio=Math.max(0, 100 - errs.length*15*LEVEL_FACTOR[analysisLevel]);
  return Math.min(100,ratio);
}

function updateBars(values){
  const ids=['bar-tono','bar-mule','bar-verbos','bar-ritmo','bar-emocion'];
  ids.forEach((id,i)=>{
    const fill=document.getElementById(id);
    fill.style.width=values[i]+'%';
    let color=values[i]>80?'var(--exito)':(values[i]>50?'var(--alerta)':'var(--error)');
    fill.style.background=color;
  });
}

analyze();
</script>
</body>
</html>
